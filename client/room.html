<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>GET IN HERE!</title>
        <script src="https://code.jquery.com/jquery-latest.min.js"></script>
        <script src="https://webrtc.github.io/adapter/adapter-latest.js"></script>
        <script defer src="/socket.io/socket.io.js"></script>
        <script defer src="/simple-peer/simplepeer.min.js"></script>
        <script defer src="/js/main.js"></script>    <!-- server폴더 routes.js 에서 app.use로 라우팅해준 덕분인듯-->
        <script defer src="/js/designControl.js"></script>

        <link rel="stylesheet" href="/css/index.css">

        <script>
            function NotReload() {
                if ((event.ctrlKey == true && (event.keyCode == 78 || event.keyCode == 82)) || (event.keyCode == 116)) {
                    if(confirm("페이지를 새로고침 하시겠습니까?")){

                    }
                    else{
                        event.keyCode = 0;
                        event.cancelBubble = true;
                        event.returnValue = false;
                    }
                }
            }
            document.onkeydown = NotReload;


            function selectCharacter(){
                let characterNumber = document.getElementById("character-number").options.selectedIndex;
                console.log(characterNumber);
                
                $.ajax({
                    type: "POST",
                    url: "/character",
                    data: {
                        character_number: characterNumber,
                    },
                    success: function (response) {
                        if (response["success"] == true) {
                            console.log(response["characterPath"]);
                        } else {
                            console.log("서버 오류");
                        }
                    }
                });
            }
        </script>

    </head>
    <body>
        <div class="preset">
            <h1> SELECT CHARACTER </h1>
            <select id="character-number" name="character-number">
                <option value=0>0번</option>
                <option value=1>1번</option>
                <option value=1>2번</option>
                <option value=1>3번</option>
                <option value=1>4번</option>
            </select>
            <button onclick="selectCharacter();"> go to room </button>
        </div>

        <div class="room">
            <div class="video-box">
                <div id="videos" class="video-container">
                </div>
            </div>
            <div class="local-video-box">
                <div class="toggles">
                    <div class="chat-toggle">📢</div>
                    <div class="invite-toggle">👨‍👩‍👦</div>
                    <div class="invite-toggle-notice"> Invite Link Copied! </div>
                    <div class="etc-toggle">🔧</div>
                </div>
                <video id="localVideo" autoplay muted></video>
                <div class="setting-container">
                        <!-- <button id="switchButton" class="settings" onclick="switchMedia()">Switch Camera</button> -->
                        <button id="muteButton" class="settings" onclick="toggleMute()">Unmuted</button>
                        <button id="vidButton" class="settings" onclick="toggleVid()">Video Enabled</button>
                </div>
            </div>
    
            <div class="chat-box">
                <div class="message-box" id="message-box">
                    <div class="message-other">
                        <div class="message-name"> other </div>
                        <div class="message-text"> message </div>
                    </div>
                    <div class="message-own">
                        <div class="message-text"> my message </div>
                    </div>
                </div>
                <div class="input-bar">
                    <input type="text" id="chat-message"> 
                    <button onclick="sendChat();">✉</button>
                </div>
            </div>
        </div>
    </body>
</html>
